{
    "title": "Matter Search",
    "inputVisability": [
        {
            "rule": "phaseName().toLowerCase()==='new'"
        }
    ],
    "fackMode": false,
    "formBuilderFieldSerialisedData": "matterJSON",
    "selectedFieldDisplayValue": "`${dataContext.matterCode} - ${dataContext.shortName}`",
    "loadApiResultDataPath": "data",
    "loadApiUrl": "`/api/proxy/hurricane-api/_/v2/matters/${dataContext.data.matterCode||dataContext.data.code}`",
    "dataMapping": [
        {
            "formBuilderField": "expert-matter-number",
            "searchResultField": "`${data.matterCode}`"
        },
        {
            "formBuilderField": "expert-matter-number-value",
            "searchResultField": "`${data.matterCode}`"
        },
        {
            "formBuilderField": "matter-details-ib",
            "searchResultField": "`${data.secure}`"
        },
        {
            "formBuilderField": "matter-details-name",
            "searchResultField": "`${data.shortName}`"
        },
        {
            "formBuilderField": "matter-details-client-name",
            "searchResultField": "`${data.client.name}`"
        },
        {
            "formBuilderField": "matter-details-client-code",
            "searchResultField": "`${data.client.code}`"
        },
        {
            "formBuilderField": "matter-details-partner-name",
            "searchResultField": "`${data.partner.name}`"
        }
    ],
    "debug": {
        "enabled": true,
        "logToConsole": true,
        "showInAspect": false,
        "liveConfig": true
    },
    "eventsToReactTo": [],
    "searchFields": {
        "container": {},
        "icon": [
            {
                "icon": "fa-search fa-2x text-primary"
            }
        ],
        "style": [
            {
                "rule": "dataContext.data.status.toLowerCase()==='closed'",
                "style": {
                    "color": "lightgrey"
                }
            }
        ],
        "rows": [
            {
                "fields": [
                    {
                        "field": "`${dataContext.data.matterCode||dataContext.data.code}`",
                        "style": "font-weight:bold",
                        "icon": [
                            {
                                "rule": "dataContext.data.status.toLowerCase()==='open'",
                                "icon": "fa-folder-open text-success",
                                "position": "before"
                            },
                            {
                                "rule": "dataContext.data.status.toLowerCase()==='closed'",
                                "icon": "fa-folder text-danger",
                                "position": "before"
                            }
                        ],
                        "width": null
                    },
                    {
                        "field": "dataContext.title"
                    },
                    {
                        "field": "dataContext.data.status",
                        "formatter": "value.toUpperCase()",
                        "label": "Status",
                        "position": "right",
                        "width": null
                    }
                ]
            },
            {
                "fields": [
                    {

                    },
                    {
                        "label": "Client",
                        "field": "dataContext.data.client",
                        "width": null
                    },
                    {}
                ]
            }
        ]
    },
    "selectedFields": {
        "container": {
            "style": [
                {
                    "rule": "secure",
                    "style": {
                        "box-shadow": "1px 1px 62px #cb8383"
                    }
                },
                {
                    "rule": "!secure",
                    "style": {
                        "box-shadow": "1px 1px 10px #a4a3a3"
                    }
                }
            ]
        },
        "icon": [
            {
                "rule": "secure",
                "icon": "fa-shield text-warning fa-2x",
                "position": "before"
            }
        ],
        "rows": [
            {
                "fields": [
                    {
                        "field": "dataContext.matterCode",
                        "style": "font-weight:bold",
                        "icon": [
                            {
                                "rule": "status.toLowerCase()==='open'",
                                "icon": "fa-folder-open text-success",
                                "position": "before"
                            },
                            {
                                "rule": "status.toLowerCase()==='closed'",
                                "icon": "fa-folder text-danger",
                                "position": "before"
                            }
                        ],
                        "width": null
                    },
                    {
                        "field": "dataContext.shortName",
                        "width": null,
                        "style": "font-weight:bold"
                    },
                    {
                        "field": "dataContext.status",
                        "formatter": "value.toUpperCase()",
                        "label": "Status",
                        "position": "right",
                        "width": null,
                        "style": "font-weight:bold"
                    }
                ]
            },
            {
                "fields": [
                    {
                        "fields": "dataContext.practiceGroup"
                    },
                    {
                        "style": {
                            "font-size": "smaller",
                            "margin-top": "-10px"
                        },
                        "field": "dataContext.practiceGroup"
                    },
                    {
                        "fields": "dataContext.practiceGroup"
                    }
                ]
            },
            {
                "fields": [
                    {
                        "label": "Client",
                        "field": "dataContext.client.name",
                        "width": null
                    },
                    {
                        "field": "dataContext.client.code",
                        "width": null,
                        "style": {}
                    }
                ]
            },
            {
                "fields": [
                    {
                        "label": "Partner",
                        "field": "dataContext.partner.name",
                        "width": null
                    },
                    {
                        "field": "dataContext.partner.code",
                        "width": null,
                        "style": {}
                    }
                ]
            },
            {
                "fields": [
                    {
                        "label": "Location",
                        "field": "dataContext.location.country",
                        "width": null
                    },
                    {
                        "label": "Office",
                        "field": "dataContext.location.office",
                        "width": null,
                        "style": {}
                    },
                    {
                        "label": "Region",
                        "field": "dataContext.location.region",
                        "width": null,
                        "style": {}
                    }
                ]
            }
        ]
    },
    "searchApiExecutionSettings": [
        {
            "method": "GET",
            "url": "/api/proxy/hurricane-api/_/v1/find?q={searchTerm}&engines=MBN",
            "resultDataPath": "data[0].results",
            "name":"Matter By Number"
        },
        {
            "method": "GET",
            "url": "/api/proxy/hurricane-api/_/v1/find?q={searchTerm}&engines=MBC",
            "resultDataPath": "data[0].results",
            "name":"Matter By Content"
        }
    ],
    "searchApiResultCollectionPath": "data[0].results",
    "searchApiUrl": "/api/proxy/hurricane-api/_/v1/find?q={searchTerm}&engines=MBN",
    "readOnly": [
        {
            "rule": "matterIsSecure"
        }
    ]
}