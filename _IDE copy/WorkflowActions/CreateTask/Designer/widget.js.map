{"version":3,"file":"widget.js","names":["window","Custom","WorkflowActions","CreateTaskDesigner","element","configuration","base","self","defaults","node","model","options","$","extend","action","sharedoTypePickerOptions","multiSelect","selectMode","selectedItem","config","taskType","rootTypes","assignmentPickerOptions","sharedoTypeSystemName","assignments","ui","excludeRoles","phases","phasePickerOptions","priorities","ko","observableArray","disposables","onCompleteOutlet","subscribe","setOnCompleteOutlet","bind","onOverdueOutlet","setOnOverdueOutlet","prototype","loadAndBind","$ajaxMutex","getOnce","then","response","optionSetValueProperties","onDestroy","_","each","d","dispose","addAvailableOutlet","removeAvailableOutlet","setOnReminderOutlet","onReminderOutlet"],"sources":["../../../../src/WorkflowActions/CreateTask/Designer/widget.ts"],"sourcesContent":["// Namespacing\n// namespace(\"Sharedo.Core.Case.WorkflowEditor.NodeTypes\");\n\nwindow.Custom = window.Custom || {};\nwindow.Custom.WorkflowActions = window.Custom.WorkflowActions || {};\n\n// View model\nwindow.Custom.WorkflowActions.CreateTaskDesigner = function (element: any, configuration: any, base: any) {\n    var self = this;\n    var defaults =\n    {\n        // The selected node\n        node: null,\n\n        // The overall process model object\n        model: null\n    };\n\n    var options = $.extend(true, {}, defaults, configuration);\n\n    self.action = options.node;\n    self.model = options.model;\n\n    self.sharedoTypePickerOptions = \n    {\n        multiSelect: false,\n        selectMode: \"systemName\",\n        selectedItem: self.action.config.taskType,\n        rootTypes: [\"task\"]\n    };\n\n    self.assignmentPickerOptions =\n    {\n        action: self.action,\n        sharedoTypeSystemName: self.action.config.taskType,\n        assignments: self.action.ui.assignments,\n        // Exclude these roles as managed elsewhere\n        excludeRoles: [\"primary-owner\"]\n    };\n\n    self.phases = self.action.ui.phases;\n    self.phasePickerOptions =\n    {\n        action: self.action,\n        sharedoTypeSystemName: self.action.config.taskType,\n        phases: self.phases\n    };\n\n    self.priorities = ko.observableArray();\n\n    self.disposables =\n    [\n        self.action.config.onCompleteOutlet.subscribe(self.setOnCompleteOutlet.bind(self)),\n        self.action.config.onOverdueOutlet.subscribe(self.setOnOverdueOutlet.bind(self))\n    ];\n};\n\nwindow.Custom.WorkflowActions.CreateTaskDesigner.prototype.loadAndBind = function() {\n    const self = this;\n\n    $ajaxMutex.getOnce(\"/api/ods/optionsets/work-priority\")\n        .then((response: { optionSetValueProperties: any; }) => {\n            self.priorities(response.optionSetValueProperties);\n        });\n}\n\nwindow.Custom.WorkflowActions.CreateTaskDesigner.prototype.onDestroy = function()\n{\n    var self = this;\n\n    _.each(self.disposables, (d: { dispose: () => any; }) => d.dispose());\n};\n\nwindow.Custom.WorkflowActions.CreateTaskDesigner.prototype.setOnCompleteOutlet = function()\n{\n    var self = this;\n    if (self.action.config.onCompleteOutlet())\n    {\n        self.action.addAvailableOutlet(\"onComplete\", \"Task complete\");\n    }\n    else\n    {\n        self.action.removeAvailableOutlet(\"onComplete\");\n    }\n};\n\nwindow.Custom.WorkflowActions.CreateTaskDesigner.prototype.setOnReminderOutlet = function()\n{\n    var self = this;\n    if (self.action.config.onReminderOutlet())\n    {\n        self.action.addAvailableOutlet(\"onReminderDue\", \"Reminder due\");\n    }\n    else\n    {\n        self.action.removeAvailableOutlet(\"onReminderDue\");\n    }\n};\n\nwindow.Custom.WorkflowActions.CreateTaskDesigner.prototype.setOnOverdueOutlet = function()\n{\n    var self = this;\n    if (self.action.config.onOverdueOutlet())\n    {\n        self.action.addAvailableOutlet(\"onOverdue\", \"Overdue\");\n    }\n    else\n    {\n        self.action.removeAvailableOutlet(\"onOverdue\");\n    }\n};\n"],"mappings":"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"}