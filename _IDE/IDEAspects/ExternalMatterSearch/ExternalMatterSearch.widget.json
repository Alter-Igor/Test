{
  "id": "IDEAspects.ExternalMatterSearch",
  "type": "widget",
  "priority": 6000,
  "designer": {
    "allowInPortalDesigner": false,
    "allowInSharedoPortalDesigner": false,
    "allowAspectAdapter": true,
    "title": "External Matter Search",
    "icon": "fa-cog",
    "description": "External Matter Search",
    "categories": [],
    "isConfigurable": true,
    "configurationWidget": null,
    "defaultConfigurationJson": {
      "title": "Matter Search",
      "inputVisability": [
        {
          "rule": "phaseName().toLowerCase()==='new'"
        }
      ],
      "fackMode": false,
      "formBuilderFieldSerialisedData": "matterJSON",
      "selectedFieldDisplayValue": "`${dataContext.matterCode} - ${dataContext.shortName}`",
      "loadApiResultDataPath": "data",
      "loadApiUrl": "`/api/proxy/hurricane-api/_/v2/matters/${dataContext.data.matterCode||dataContext.data.code}`",
      "dataMapping": [
        {
          "formBuilderField": "expert-matter-number",
          "searchResultField": "`${dataContext.data.matterCode}`"
        },
        {
          "formBuilderField": "expert-matter-number-value",
          "searchResultField": "`${dataContext.data.matterCode}`"
        },
        {
          "formBuilderField": "matter-details-ib",
          "searchResultField": "`${dataContext.data.secure}`"
        },
        {
          "formBuilderField": "matter-details-name",
          "searchResultField": "`${dataContext.data.shortName}`"
        },
        {
          "formBuilderField": "matter-details-client-name",
          "searchResultField": "`${dataContext.data.client.name}`"
        },
        {
          "formBuilderField": "matter-details-client-code",
          "searchResultField": "`${dataContext.data.client.code}`"
        },
        {
          "formBuilderField": "matter-details-partner-name",
          "searchResultField": "`${dataContext.data.partner.name}`"
        }
      ],
      "debug": {
        "supportRequestEnabled": false,
        "enabled": true,
        "logToConsole": true,
        "showInAspect": false,
        "liveConfig": true
      },
      "searchFields": {
        "container": {},
        "icon": [
          {
            "icon": "fa-search fa-2x text-primary"
          }
        ],
        "style": [
          {
            "rule": "dataContext.data.data.status.toLowerCase()==='closed'",
            "style": {
              "color": "lightgrey"
            }
          }
        ],
        "rows": [
          {
            "fields": [
              {
                "field": "`${dataContext.data.data.matterCode||dataContext.data.data.code}`",
                "style": "font-weight:bold",
                "icon": [
                  {
                    "rule": "dataContext.data.data.status.toLowerCase()==='open'",
                    "icon": "fa-folder-open text-success",
                    "position": "before"
                  },
                  {
                    "rule": "dataContext.data.data.status.toLowerCase()==='closed'",
                    "icon": "fa-folder text-danger",
                    "position": "before"
                  }
                ],
                "width": null
              },
              {
                "field": "dataContext.data.title"
              },
              {
                "field": "dataContext.data.data.status",
                "formatter": "value.toUpperCase()",
                "label": "Status",
                "position": "right",
                "width": null
              }
            ]
          },
          {
            "fields": [
              {
                "field": ""
              },
              {
                "label": "Client",
                "field": "dataContext.data.data.client",
                "width": null
              },
              {
                "field": ""
              }
            ]
          }
        ]
      },
      "selectedFields": {
        "container": {
          "style": [
            {
              "rule": "secure",
              "style": {
                "box-shadow": "1px 1px 62px #cb8383"
              }
            },
            {
              "rule": "!secure",
              "style": {
                "box-shadow": "1px 1px 10px #a4a3a3"
              }
            }
          ]
        },
        "icon": [
          {
            "rule": "secure",
            "icon": "fa-shield text-warning fa-2x",
            "position": "before"
          }
        ],
        "rows": [
          {
            "fields": [
              {
                "field": "dataContext.data.matterCode",
                "style": "font-weight:bold",
                "icon": [
                  {
                    "rule": "status.toLowerCase()==='open'",
                    "icon": "fa-folder-open text-success",
                    "position": "before"
                  },
                  {
                    "rule": "status.toLowerCase()==='closed'",
                    "icon": "fa-folder text-danger",
                    "position": "before"
                  }
                ],
                "width": null
              },
              {
                "field": "dataContext.data.shortName",
                "width": null,
                "style": "font-weight:bold;color:red;font-size:larger"
              },
              {
                "field": "dataContext.data.status",
                "formatter": "value.toUpperCase()",
                "label": "Status",
                "position": "right",
                "width": null,
                "style": "font-weight:bold"
              }
            ]
          },
          {
            "fields": [
              {
                "field": ""
              },
              {
                "style": {
                  "font-size": "smaller",
                  "margin-top": "-10px"
                },
                "field": "dataContext.data.practiceGroup"
              },
              {
                "field": ""
              }
            ]
          },
          {
            "fields": [
              {
                "label": "Client",
                "field": "dataContext.data.client.name",
                "width": null
              },
              {
                "field": "dataContext.data.client.code",
                "width": null,
                "style": {}
              }
            ]
          },
          {
            "fields": [
              {
                "label": "Partner",
                "field": "dataContext.data.partner.name",
                "width": null
              },
              {
                "field": "dataContext.data.partner.code",
                "width": null,
                "style": {}
              }
            ]
          },
          {
            "fields": [
              {
                "label": "Location",
                "field": "dataContext.data.location.country",
                "width": null
              },
              {
                "label": "Office",
                "field": "dataContext.data.location.office",
                "width": null,
                "style": {}
              },
              {
                "label": "Region",
                "field": "dataContext.data.location.region",
                "width": null,
                "style": {}
              }
            ]
          }
        ]
      },
      "searchApiExecutionSettings": [
        {
          "method": "GET",
          "url": "/api/proxy/hurricane-api/_/v1/find?q={searchTerm}&engines=MBN",
          "resultDataPath": "data[0].results",
          "name": "Matter Number"
        },
        {
          "method": "GET",
          "url": "/api/proxy/hurricane-api/_/v1/find?q={searchTerm}&engines=MBC",
          "resultDataPath": "data[0].results",
          "name": "Matter Content"
        }
      ],
      "eventsToReactTo": []
    }
  },
  "scripts": [
    "/_ideFiles/IDEAspects/ExternalMatterSearch/ExternalMatterSearch.js"
  ],
  "styles": [
    "/_ideFiles/IDEAspects/ExternalMatterSearch/ExternalMatterSearch.css"
  ],
  "templates": [
    "/_ideFiles/IDEAspects/ExternalMatterSearch/ExternalMatterSearch.html"
  ],
  "menuTemplates": [],
  "components": [
    "Sharedo.UI.Framework.Components.AutoComplete",
    "Sharedo.Core.Case.TextEditor.Component",
    "Sharedo.UI.Framework.Components.SyntaxEditor"
  ]
}