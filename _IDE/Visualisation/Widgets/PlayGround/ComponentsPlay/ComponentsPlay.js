(()=>{var e={d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{ComponentsPlay:()=>s});const o=ko;function s(e,t,o){return new i(e,t,o)}class i{constructor(e,t,o){this.log("constructor",t);const s=$.extend(!0,{},{id:null,todoMessage:null},t);this.setModelDefaults(s),this.model={todoMessage:s.todoMessage,sharedoId:s.id,sharedoTypeSystemName:s.sharedoTypeSystemName},this.setupOdsPickerConfig(),this.setupAutoComplete()}setupAutoComplete(){this.autoComplete=new Sharedo.UI.Framework.Components.AutoCompleteHandler({enabled:!0,mode:"select",text:{placeholder:"Search for matter",empty:"Start typing to lookup a matter by number",emptyIcon:"fa-search",typing:"Will search when you stop typing",searching:"One moment...",noResults:"Nothing found"},select:{allowClear:!0,selectedValue:this.selectedMatter,onLoad:this.autoCompleteLoadMatter.bind(this)},onFind:this.autoCompleteFinder.bind(this),templates:{result:"__matter_search_item_template"}})}autoCompleteFinder(e){this.log("autoCompleteFinder",e),e.toLowerCase();let t=[];for(let e=0;e<100;e++)t.push(new Sharedo.UI.Framework.Components.AutoCompleteFindCard({type:"result",id:e,icon:"fa-users",text:"Team "+e}));return t.length>0&&(t=_.sortBy(t,"text"),t.splice(0,0,new Sharedo.UI.Framework.Components.AutoCompleteFindCard({type:"message",icon:"fa-check text-success",text:"Found "+t.length+" teams"}))),t}autoCompleteLoadMatter(){this.log("loadMatter",this)}setModelDefaults(e){!e.id&&$ui&&$ui.pageContext&&$ui.pageContext.sharedoId&&(e.id=$ui.pageContext.sharedoId),!e.sharedoTypeSystemName&&$ui&&$ui.pageContext&&$ui.pageContext.sharedoTypeSystemName&&(e.sharedoTypeSystemName=$ui.pageContext.sharedoTypeSystemName),this.odsEntityPickerConfig=null}onDestroy(){this.log("onDestroy",this)}log(e,t){console.log("%c ComponentsPlay: "+e,"color: #ff0000",t)}loadAndBind(){this.log("loadAndBind",this)}setupOdsPickerConfig(){this.log("setupOdsPickerConfig",this),this.odsEntityPickerConfig={odsEntityValues:o.observableArray(),validationErrorCount:o.observableArray(),odsEntityValidationErrorCount:o.observable(0),configuration:{sharedoId:this.model.sharedoId,sharedoTypeSystemName:this.model.sharedoTypeSystemName,showPreSharedo:!0,showPostSharedo:!0,roleConfigModels:o.observableArray([{displayName:"Client",roleSystemName:"client",showSearchOds:!0,required:!0,icon:"",disabled:!1,odsId:null}])}},window.testComp=this.odsEntityPickerConfig,this.log("setupOdsPickerConfig",this.odsEntityPickerConfig),this.log("setupOdsPickerConfig",this.odsEntityPickerConfig.configuration.roleConfigModels()),this.odsPicker=this.odsEntityPickerConfig,this.countdownAndSetOdsPickerDefaultExample()}countdownAndSetOdsPickerDefaultExample(){let e=1e3;this.odsCountdown=o.observable(100);let t=()=>{var o,s;if(e-=50,e<5&&(e=30),console.log("interval",e),this.odsCountdown)if(this.odsCountdown(this.odsCountdown()-1),this.odsCountdown()<=0){if(this.odsEntityPickerConfig.odsEntityValues()[0].odsId())return;this.odsEntityPickerConfig.configuration.roleConfigModels()[0].odsId=$ui.pageContext.user.userid();let e=null===(s=null===(o=this.odsEntityPickerConfig.odsEntityValues()[0])||void 0===o?void 0:o.component)||void 0===s?void 0:s.updateComponentFromConfig;console.log("updateMethod",e),e&&e.bind(this.odsEntityPickerConfig.odsEntityValues()[0].component)()}else setTimeout(t,e)};setTimeout(t,e)}}})();var o=PlayGround="undefined"==typeof PlayGround?{}:PlayGround;for(var s in t)o[s]=t[s];t.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQTFELEVBQStDLFFBQS9DLEVBQUEzRSxLQUFLcUQsc0JBQXNCTSxrQkFBa0IsVUFBRSxlQUFFaUIsaUJBQVMsZUFBRUMsMEJBQy9FcEIsUUFBUXhELElBQUksZUFBZ0IwRSxHQUN4QkEsR0FFQUEsRUFBYXpDLEtBQUtsQyxLQUFLcUQsc0JBQXNCTSxrQkFBa0IsR0FBR2lCLFVBQWxFRCxFLE1BR0pHLFdBQVdQLEVBQWNGLEUsRUFHakNTLFdBQVdQLEVBQWNGLEVBQzdCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QbGF5R3JvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1BsYXlHcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL1BsYXlHcm91bmQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9QbGF5R3JvdW5kL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vUGxheUdyb3VuZC9leHRlcm5hbCB2YXIgXCJrb1wiIiwid2VicGFjazovL1BsYXlHcm91bmQvLi9Db21wb25lbnRzUGxheS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSBrbzsiLCJpbXBvcnQgKiBhcyBrbyBmcm9tIFwia25vY2tvdXRcIjtcclxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuaW1wb3J0IHsgSVNoYXJlZG9Db3JlQ2FzZU9kc0VudGl0eVBpY2tlciB9IGZyb20gXCIuLi8uLi8uLi9UeXBpbmdzL2NvbXBvbmVudHMvc2hhcmVkby1jb3JlLWNhc2Utb2RzLWVudGl0eS1waWNrZXJcIjtcclxuaW1wb3J0IHsgSUF1dG9Db21wbGV0ZUZpbmRDYXJkIH0gZnJvbSBcIi4uLy4uLy4uL1R5cGluZ3MvY29tcG9uZW50cy9hdXRvLWNvbXBsZXRlXCI7XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENvbXBvbmVudHNQbGF5KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb25maWd1cmF0aW9uOiBhbnksIGJhc2VNb2RlbDogYW55KTogQ29tcG9uZW50c1BsYXlDbGFzcyB7XHJcbiAgICByZXR1cm4gbmV3IENvbXBvbmVudHNQbGF5Q2xhc3MoZWxlbWVudCwgY29uZmlndXJhdGlvbiwgYmFzZU1vZGVsKTtcclxufVxyXG5cclxuXHJcblxyXG5jbGFzcyBDb21wb25lbnRzUGxheUNsYXNzIHtcclxuICAgIG1vZGVsOiB7XHJcbiAgICAgICAgdG9kb01lc3NhZ2U6IHN0cmluZyB8IG51bGwsXHJcbiAgICAgICAgc2hhcmVkb0lkOiBzdHJpbmcgfCBudWxsLFxyXG4gICAgICAgIHNoYXJlZG9UeXBlU3lzdGVtTmFtZTogc3RyaW5nIHwgbnVsbCxcclxuICAgIH07XHJcblxyXG4gICAgb2RzRW50aXR5UGlja2VyQ29uZmlnOiBhbnk7XHJcblxyXG4gICAgYXV0b0NvbXBsZXRlOiBhbnk7XHJcbiAgICBzZWxlY3RlZE1hdHRlcjogYW55O1xyXG4gICAgb2RzUGlja2VyOiBhbnk7XHJcbiAgICBvZHNDb3VudGRvd246IGtvLk9ic2VydmFibGU8bnVtYmVyPiB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlndXJhdGlvbjogYW55LCBiYXNlTW9kZWw6IGFueSkge1xyXG4gICAgICAgIHRoaXMubG9nKFwiY29uc3RydWN0b3JcIiwgY29uZmlndXJhdGlvbik7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIGlkOiBudWxsLFxyXG4gICAgICAgICAgICB0b2RvTWVzc2FnZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0cywgY29uZmlndXJhdGlvbik7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbERlZmF1bHRzKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSB7XHJcbiAgICAgICAgICAgIHRvZG9NZXNzYWdlOiBvcHRpb25zLnRvZG9NZXNzYWdlLFxyXG4gICAgICAgICAgICBzaGFyZWRvSWQ6IG9wdGlvbnMuaWQsXHJcbiAgICAgICAgICAgIHNoYXJlZG9UeXBlU3lzdGVtTmFtZTogb3B0aW9ucy5zaGFyZWRvVHlwZVN5c3RlbU5hbWVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldHVwT2RzUGlja2VyQ29uZmlnKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEF1dG9Db21wbGV0ZSgpO1xyXG5cclxuICAgIH1cclxuICAgIHNldHVwQXV0b0NvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlID0gbmV3IFNoYXJlZG8uVUkuRnJhbWV3b3JrLkNvbXBvbmVudHMuQXV0b0NvbXBsZXRlSGFuZGxlcihcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vZGU6IFwic2VsZWN0XCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaCBmb3IgbWF0dGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1wdHk6IFwiU3RhcnQgdHlwaW5nIHRvIGxvb2t1cCBhIG1hdHRlciBieSBudW1iZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbXB0eUljb246IFwiZmEtc2VhcmNoXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwaW5nOiBcIldpbGwgc2VhcmNoIHdoZW4geW91IHN0b3AgdHlwaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoaW5nOiBcIk9uZSBtb21lbnQuLi5cIixcclxuICAgICAgICAgICAgICAgICAgICBub1Jlc3VsdHM6IFwiTm90aGluZyBmb3VuZFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0OlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZTogdGhpcy5zZWxlY3RlZE1hdHRlcixcclxuICAgICAgICAgICAgICAgICAgICBvbkxvYWQ6IHRoaXMuYXV0b0NvbXBsZXRlTG9hZE1hdHRlci5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25GaW5kOiB0aGlzLmF1dG9Db21wbGV0ZUZpbmRlci5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVzOiB7IHJlc3VsdDogXCJfX21hdHRlcl9zZWFyY2hfaXRlbV90ZW1wbGF0ZVwiIH0sXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhdXRvQ29tcGxldGVGaW5kZXIodjpzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9nKFwiYXV0b0NvbXBsZXRlRmluZGVyXCIsIHYpO1xyXG4gICAgICAgICAgICBsZXQgc2VhcmNoID0gdi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3VsdHM6IEFycmF5PElBdXRvQ29tcGxldGVGaW5kQ2FyZD4gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vY3JlYXRlIGEgbGlzdCBvZiAxMDAgaXRlbXNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTaGFyZWRvLlVJLkZyYW1ld29yay5Db21wb25lbnRzLkF1dG9Db21wbGV0ZUZpbmRDYXJkKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlc3VsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiZmEtdXNlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlRlYW0gXCIgKyBpXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBfLnNvcnRCeShyZXN1bHRzLCBcInRleHRcIik7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnNwbGljZSgwLCAwLCBuZXcgU2hhcmVkby5VSS5GcmFtZXdvcmsuQ29tcG9uZW50cy5BdXRvQ29tcGxldGVGaW5kQ2FyZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJmYS1jaGVjayB0ZXh0LXN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkZvdW5kIFwiICsgcmVzdWx0cy5sZW5ndGggKyBcIiB0ZWFtc1wiXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBcclxuICAgIGF1dG9Db21wbGV0ZUxvYWRNYXR0ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5sb2coXCJsb2FkTWF0dGVyXCIsIHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRNb2RlbERlZmF1bHRzKG9wdGlvbnM6IGFueSkge1xyXG4gICAgICAgIGlmICghb3B0aW9ucy5pZCAmJiAkdWkgJiYgJHVpLnBhZ2VDb250ZXh0ICYmICR1aS5wYWdlQ29udGV4dC5zaGFyZWRvSWQpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5pZCA9ICR1aS5wYWdlQ29udGV4dC5zaGFyZWRvSWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIW9wdGlvbnMuc2hhcmVkb1R5cGVTeXN0ZW1OYW1lICYmICR1aSAmJiAkdWkucGFnZUNvbnRleHQgJiYgJHVpLnBhZ2VDb250ZXh0LnNoYXJlZG9UeXBlU3lzdGVtTmFtZSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLnNoYXJlZG9UeXBlU3lzdGVtTmFtZSA9ICR1aS5wYWdlQ29udGV4dC5zaGFyZWRvVHlwZVN5c3RlbU5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9kc0VudGl0eVBpY2tlckNvbmZpZyA9IG51bGw7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sb2coXCJvbkRlc3Ryb3lcIiwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nKG1lc3NhZ2U6IHN0cmluZywgZGF0YTogYW55KSB7XHJcbiAgICAgICAgLy9sb2cgd2l0aCBuYW1lIG9mIHRoZSBjb21wb25lbnQgYW5kIHdpdGggY29sb3JcclxuICAgICAgICBjb25zb2xlLmxvZyhcIiVjIENvbXBvbmVudHNQbGF5OiBcIiArIG1lc3NhZ2UsIFwiY29sb3I6ICNmZjAwMDBcIiwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBsb2FkQW5kQmluZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxvZyhcImxvYWRBbmRCaW5kXCIsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldHVwT2RzUGlja2VyQ29uZmlnKCkge1xyXG5cclxuICAgICAgICB0aGlzLmxvZyhcInNldHVwT2RzUGlja2VyQ29uZmlnXCIsIHRoaXMpO1xyXG5cclxuICAgICAgICBsZXQgcm9sZUNvbmZpZ01vZGVscyA9IFt7XHJcbiAgICAgICAgICAgIFwiZGlzcGxheU5hbWVcIjogXCJDbGllbnRcIixcclxuICAgICAgICAgICAgXCJyb2xlU3lzdGVtTmFtZVwiOiBcImNsaWVudFwiLFxyXG4gICAgICAgICAgICBcInNob3dTZWFyY2hPZHNcIjogdHJ1ZSxcclxuICAgICAgICAgICAgXCJyZXF1aXJlZFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcImljb25cIjogXCJcIixcclxuICAgICAgICAgICAgXCJkaXNhYmxlZFwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJvZHNJZFwiOiBudWxsXHJcbiAgICAgICAgfV07XHJcblxyXG4gICAgICAgIHRoaXMub2RzRW50aXR5UGlja2VyQ29uZmlnID1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9kc0VudGl0eVZhbHVlczoga28ub2JzZXJ2YWJsZUFycmF5KCksXHJcbiAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvckNvdW50OiBrby5vYnNlcnZhYmxlQXJyYXkoKSxcclxuICAgICAgICAgICAgb2RzRW50aXR5VmFsaWRhdGlvbkVycm9yQ291bnQ6IGtvLm9ic2VydmFibGUoMCksXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb246XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNoYXJlZG9JZDogdGhpcy5tb2RlbC5zaGFyZWRvSWQsXHJcbiAgICAgICAgICAgICAgICBzaGFyZWRvVHlwZVN5c3RlbU5hbWU6IHRoaXMubW9kZWwuc2hhcmVkb1R5cGVTeXN0ZW1OYW1lLFxyXG4gICAgICAgICAgICAgICAgc2hvd1ByZVNoYXJlZG86IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzaG93UG9zdFNoYXJlZG86IHRydWUsXHJcbiAgICAgICAgICAgICAgICByb2xlQ29uZmlnTW9kZWxzOiBrby5vYnNlcnZhYmxlQXJyYXkocm9sZUNvbmZpZ01vZGVscylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS50ZXN0Q29tcCA9IHRoaXMub2RzRW50aXR5UGlja2VyQ29uZmlnO1xyXG5cclxuICAgICAgICB0aGlzLmxvZyhcInNldHVwT2RzUGlja2VyQ29uZmlnXCIsIHRoaXMub2RzRW50aXR5UGlja2VyQ29uZmlnKTtcclxuICAgICAgICB0aGlzLmxvZyhcInNldHVwT2RzUGlja2VyQ29uZmlnXCIsIHRoaXMub2RzRW50aXR5UGlja2VyQ29uZmlnLmNvbmZpZ3VyYXRpb24ucm9sZUNvbmZpZ01vZGVscygpKTtcclxuICAgICAgICB0aGlzLm9kc1BpY2tlciA9IHRoaXMub2RzRW50aXR5UGlja2VyQ29uZmlnO1xyXG5cclxuICAgICAgICAvL2NvdW50ZG93biAxMCBzZWNvbmRzIGFuZCB1cGRhdGUgb2RzRGVmYXVsdENvdW50ZG93biB2YWx1ZSBvbiBlYWNoIHNlY29uZFxyXG4gICAgICAgIHRoaXMuY291bnRkb3duQW5kU2V0T2RzUGlja2VyRGVmYXVsdEV4YW1wbGUoKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ291bnRkb3duIDEwIHNlY29uZHMgYW5kIHVwZGF0ZSBvZHNEZWZhdWx0Q291bnRkb3duIHZhbHVlIG9uIGVhY2ggc2Vjb25kXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY291bnRkb3duQW5kU2V0T2RzUGlja2VyRGVmYXVsdEV4YW1wbGUoKSB7XHJcbiAgICAgICAgbGV0IGludGVydmFsID0gMTAwMDtcclxuICAgICAgICBsZXQgb2RzRGVmYXVsdENvdW50ZG93biA9IDEwMDtcclxuICAgICAgICB0aGlzLm9kc0NvdW50ZG93biA9IGtvLm9ic2VydmFibGUob2RzRGVmYXVsdENvdW50ZG93bik7XHJcblxyXG4gICAgICAgIGxldCB0aWNrRnVuY3Rpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGludGVydmFsID0gaW50ZXJ2YWwgLSA1MDtcclxuICAgICAgICAgICAgaWYgKGludGVydmFsIDwgNSkgeyBpbnRlcnZhbCA9IDMwOyB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW50ZXJ2YWxcIiwgaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMub2RzQ291bnRkb3duKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgICB0aGlzLm9kc0NvdW50ZG93bih0aGlzLm9kc0NvdW50ZG93bigpIC0gMSk7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50Q291bnRkb3duID0gdGhpcy5vZHNDb3VudGRvd24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50Q291bnRkb3duIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50T2RzID0gdGhpcy5vZHNFbnRpdHlQaWNrZXJDb25maWcub2RzRW50aXR5VmFsdWVzKClbMF0ub2RzSWQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50T2RzKSB7IHJldHVybiB9IC8vZG8gbm90aGluZyBhcyB2YWx1ZSBpcyBzZXRcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9kc0VudGl0eVBpY2tlckNvbmZpZy5jb25maWd1cmF0aW9uLnJvbGVDb25maWdNb2RlbHMoKVswXS5vZHNJZCA9ICR1aS5wYWdlQ29udGV4dC51c2VyLnVzZXJpZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB1cGRhdGVNZXRob2QgPSB0aGlzLm9kc0VudGl0eVBpY2tlckNvbmZpZy5vZHNFbnRpdHlWYWx1ZXMoKVswXT8uY29tcG9uZW50Py51cGRhdGVDb21wb25lbnRGcm9tQ29uZmlnO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGVNZXRob2RcIiwgdXBkYXRlTWV0aG9kKTtcclxuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVNZXRob2QpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1ldGhvZC5iaW5kKHRoaXMub2RzRW50aXR5UGlja2VyQ29uZmlnLm9kc0VudGl0eVZhbHVlcygpWzBdLmNvbXBvbmVudCkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGlja0Z1bmN0aW9uLCBpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNldFRpbWVvdXQodGlja0Z1bmN0aW9uLCBpbnRlcnZhbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJrbyIsIkNvbXBvbmVudHNQbGF5IiwiZWxlbWVudCIsImNvbmZpZ3VyYXRpb24iLCJiYXNlTW9kZWwiLCJDb21wb25lbnRzUGxheUNsYXNzIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwibG9nIiwib3B0aW9ucyIsIiQiLCJleHRlbmQiLCJpZCIsInRvZG9NZXNzYWdlIiwic2V0TW9kZWxEZWZhdWx0cyIsIm1vZGVsIiwic2hhcmVkb0lkIiwic2hhcmVkb1R5cGVTeXN0ZW1OYW1lIiwic2V0dXBPZHNQaWNrZXJDb25maWciLCJzZXR1cEF1dG9Db21wbGV0ZSIsImF1dG9Db21wbGV0ZSIsIlNoYXJlZG8iLCJVSSIsIkZyYW1ld29yayIsIkNvbXBvbmVudHMiLCJBdXRvQ29tcGxldGVIYW5kbGVyIiwiZW5hYmxlZCIsIm1vZGUiLCJ0ZXh0IiwicGxhY2Vob2xkZXIiLCJlbXB0eSIsImVtcHR5SWNvbiIsInR5cGluZyIsInNlYXJjaGluZyIsIm5vUmVzdWx0cyIsInNlbGVjdCIsImFsbG93Q2xlYXIiLCJzZWxlY3RlZFZhbHVlIiwic2VsZWN0ZWRNYXR0ZXIiLCJvbkxvYWQiLCJhdXRvQ29tcGxldGVMb2FkTWF0dGVyIiwiYmluZCIsIm9uRmluZCIsImF1dG9Db21wbGV0ZUZpbmRlciIsInRlbXBsYXRlcyIsInJlc3VsdCIsInYiLCJ0b0xvd2VyQ2FzZSIsInJlc3VsdHMiLCJpIiwicHVzaCIsIkF1dG9Db21wbGV0ZUZpbmRDYXJkIiwidHlwZSIsImljb24iLCJsZW5ndGgiLCJfIiwic29ydEJ5Iiwic3BsaWNlIiwiJHVpIiwicGFnZUNvbnRleHQiLCJvZHNFbnRpdHlQaWNrZXJDb25maWciLCJvbkRlc3Ryb3kiLCJtZXNzYWdlIiwiZGF0YSIsImNvbnNvbGUiLCJsb2FkQW5kQmluZCIsIm9kc0VudGl0eVZhbHVlcyIsInZhbGlkYXRpb25FcnJvckNvdW50Iiwib2RzRW50aXR5VmFsaWRhdGlvbkVycm9yQ291bnQiLCJzaG93UHJlU2hhcmVkbyIsInNob3dQb3N0U2hhcmVkbyIsInJvbGVDb25maWdNb2RlbHMiLCJ3aW5kb3ciLCJ0ZXN0Q29tcCIsIm9kc1BpY2tlciIsImNvdW50ZG93bkFuZFNldE9kc1BpY2tlckRlZmF1bHRFeGFtcGxlIiwiaW50ZXJ2YWwiLCJvZHNDb3VudGRvd24iLCJ0aWNrRnVuY3Rpb24iLCJvZHNJZCIsInVzZXIiLCJ1c2VyaWQiLCJ1cGRhdGVNZXRob2QiLCJjb21wb25lbnQiLCJ1cGRhdGVDb21wb25lbnRGcm9tQ29uZmlnIiwic2V0VGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=