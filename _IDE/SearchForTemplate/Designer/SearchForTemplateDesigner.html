<div class="SearchForTemplateDesigner">

    <div data-bind="widgetChrome:{ icon: 'fa-list', title: 'Action configuration' }">
        <div class="form-group">
            <label for="name">Action name:</label>
            <input id="name" type="text" class="form-control" data-bind="textInput:action.name" />
            <div class="text-danger" data-bind="visible:action.validation.name, text:action.validation.name"></div>
        </div>
        <div>
            This action will search for a template that matches the search criteria and return the template Id of the
            first found template.
            <div>TODO: Allow for returning a collection</div>
        </div>
    </div>



    <div data-bind="widgetChrome:{ icon: 'fa-plus', title: 'Add Search Filter' }">

        <div class="form-group">
            <label for="workType">Search templates where the column</label>
            <div>
                <select data-bind="options: availableFieldTypes, value: action.config.fieldType"></select>
            </div>
            <div class="text-danger" data-bind="visible:action.validation.fieldType, text:action.validation.fieldType">
            </div>
        </div>


        <div class="form-group">
            <label for="p1">Contains the text value:</label>
            <!-- ko component: { name: "core-wf-token-input", params: { value: action.config.searchValue, rootModel: model } } -->
            <!-- /ko -->
            <div class="text-danger"
                data-bind="visible:action.validation.searchValue, text:action.validation.searchValue">
            </div>
        </div>
        <div class="form-group sftd-add"><button data-bind="click: action.addToFilter">Add to filter entry</button>
        </div>
    </div>

    <!-- <div>
        <p>Search the field
            <strong><span data-bind="text: action.config.fieldType"></span></strong>
            <span>for templates that contain the text</span>
            <strong><span data-bind="text: action.config.searchValue"></span></strong>
        </p>
        
    </div> -->

    <div data-bind="widgetChrome:{ icon: 'fa-arrow-left', title: 'Search Entries' }">

        <div data-bind="visible: action.config.searchEntries().length > 1">
            <label>Search templates where (all inclusive):</label>
        </div>
        <div data-bind="visible: action.config.searchEntries().length <= 1">
            <label>Search templates where :</label>
        </div>



        <!-- only show if action.config.searchEntries has more then 0  -->
        <!-- <div data-bind="text: action.config.searchEntries().length"></div> -->

        <div data-bind="visible: action.config.searchEntries().length === 0">
            <p class="text-danger">No search entries added</p>
        </div>
        <div data-bind="visible: action.config.searchEntries().length > 0">
            <div class="sftd-table">
                <div class="sftd-row sftd-row-header">
                    <div class="sftd-cell">Field Type</div>
                    <div class="sftd-cell">Contains</div>
                    <div class="sftd-cell">Remove</div>
                </div>
                <div data-bind="foreach: action.config.searchEntries">
                    <div class="sftd-row">
                        <div class="sftd-cell" data-bind="text: fieldType"></div>
                        <div class="sftd-cell" data-bind="text: searchValue"></div>
                        <div class="sftd-cell"> <button
                                data-bind="click: $parent.action.removeFromFilter">Remove</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div data-bind="widgetChrome:{ icon: 'fa-arrow-left', title: 'Output' }">

        <div class="form-group">
            <label>Store the first result of the filter in the variable:</label>
            <!-- ko component: { name: "core-wf-variable-selector", params:action.ui.outputVariable } -->
            <!-- /ko -->
        </div>

    </div>
</div>