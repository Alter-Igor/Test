

<div class="WKExpressWidget">
    
    <div class="segment_header" style="width:auto;text-align:Left; display: flex; align-items: center; justify-content:space-between;">
        <h1 style="font-size:2.0vw; font-weight:bold ; color: #FFFFFF; color: #163269; margin-bottom: 24px;">W+K Express Recoveries Platform</h1>
        <img src="/_ideFiles/WKExpressWidget/WK-Legalign.png" style="max-width: 300px; height: auto; padding: 10px 15px 15px 0px;">
    </div>
    <!--ko if: !model.currentlySubmited() -->
    <!--CLient Details-->
    <div>
        <label class="form-label">Client Details</label>
    </div>
    <div class="client-details">
        <div class="title-text" id="client-name"> 
            <div id="title-label">Client Name: </div>
            <div data-bind="text: model.organisationName()"></div>
        </div>
        <div class="title-text" id="claim-handler-name">
            <div id="title-label">Claim Handlerâ€™s Name: </div>
            <div data-bind="text:$ui.pageContext.user.firstname() + ' ' + $ui.pageContext.user.lastname()"></div>
        </div>
    </div>
    
    <br>
    <!--Claim Reference/No-->
    
    <div class="form-group">
        <label class="form-label" for="claimRef">Claim Reference/No. <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <input class="form-control col-4" id="claimRef" type="text" placeholder="Insert Claim's Reference" data-bind="textInput: model.claimRef" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.claimRef, text:validation.claimRef"></div>
        <!-- /ko -->
    </div>
    
    
    <!--Insured Name  Section-->
    
    <!-- ko if: model.claimRef() -->
    <div class="form-group">
        <label class="form-label" for="insuredName">Insured's Name <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <input class="col-sm-4 form-control" id="insuredName" type="text" placeholder="Insert Insured's name" data-bind="textInput: model.insuredName" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.insuredName, text:validation.insuredName"></div>
        <!-- /ko -->
    </div>
    
    
    <!-- ko if: model.insuredName() -->
    <div class="form-group">
        <label class="form-label" for="insuredABN">Provide insured's ABN  (if known)</label>
            <input class="form-control col-4" id="insuredABN" type="text" placeholder="Insert Insured ABN" data-bind="textInput: model.insuredABN" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.insuredABN, text:validation.insuredABN"></div>
        <!-- /ko -->
    </div>
    
     
    <!-- Third party insurer identified (toggle)-->
    <div class="form-group">
        <label class="form-label" for="thirdParty">Has the third party been identified? <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <div id="thirdPartyForm" class="btn-group" data-toggle="buttons">
                <label class="btn btn-sm" data-bind="click: thirdPartyToggle, checkedValue: model.optionsetYesNo()[1] ">
                    <input type="radio" name="thirdParty" id="thirdPartyYes" />Yes
                 </label>
                <label class="btn btn-sm" value="true" data-bind="click: thirdPartyToggle, checkedValue:model.optionsetYesNo()[0] ">
                    <input type="radio" name="thirdParty"  id="thirdPartyNo" />No
                </label>
            </div>
    </div>
   
    <!--Third party names optionset unknown enter third party name -->
   
    <!-- enter TPI details -->
    <div class="form-group" data-bind="visible: model.thirdParty()">
        <label class="form-label" for="TPIName">Third party name</label>
            <input class="form-control col-4" id="TPIName" type="text" placeholder="Insert third party name" data-bind="textInput: model.TPIName" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.TPIName, text:validation.TPIName"></div>
        <!-- /ko -->
    </div>
   
   <!--Third party insurer names optionset unknown enter third party insurer name uninsured -->
    <div class="form-group" data-bind="visible: model.thirdParty()">
        <label for="thirdPartyInsurerName">Is the third party insured?</label>
            <div>
                <select id="thirdPartyInsurerName" class="form-control" data-bind="options: model.thirdPartyInsurerName(), optionsText:'name', optionsValue: 'id', optionsCaption: 'Select a value', click: checkedThirdPartyInsurerName">
                </select> 
            </div>
    </div>
    
    
    <div class="form-group" data-bind="visible: model.checkedThirdPartyInsurerName()">
        <label class="form-label" for="TPI">Enter name of third party insurer</label>
            <input class="form-control col-4" id="TPI" type="text" placeholder="Insert Third Party Insurer" data-bind="textInput: model.TPI" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.TPI, text:validation.TPI"></div>
        <!-- /ko -->
    </div>
    
    
    
    <div class="form-group" data-bind="visible: model.checkedThirdPartyInsurerName()">
        <label class="form-label" for="TPIClaimNo">TPI Claim No.</label>
            <input class="form-control col-4" id="TPIClaimNo" type="text" placeholder="Insert TPI Claim No." data-bind="textInput: model.TPIClaimNo" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.TPIClaimNo, text:validation.TPIClaimNo"></div>
        <!-- /ko -->
    </div>
    
    
    <!-- ko if: model.thirdParty() !== null  -->
    <!--Date of loss Input-->
    <div class="form-group">
        <label class="form-label" for="dateOfLossInput">Enter date of loss <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
        <div>
            <div class="form-group">
              <div class="input-group date" data-provide="datepicker" data-bind="event:{mouseleave : checkDate, mousemove: checkDate}">
                  <input type="date" class="form-control" data-bind="value: model.dateOfLossInput, event:{ mousemove: checkDate, mouseleave : checkDate}">
              </div>
            </div>
        </div>
        <div class="text-danger" data-bind="visible:model.dateofLossGreaterThan()">Date cannot be in the future</div>
    </div>
    
    
    <!-- ko if: model.dateOfLoss() === false &&  model.dateOfLossInput() !== null && model.dateOfLossInputChecked() !== null -->
    <!-- Claim settled (toggle)-->
    <div class="form-group">
        <label class="form-label" for="claimSettled">Has the claim been settled? <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <div id="claimSettled" class="btn-group" data-toggle="buttons">
                <label class="btn btn-sm" data-bind="click: claimSettledToggle, checkedValue: model.optionsetYesNo()[1]">
                    <input type="radio" name="claimSettled" id="claimSettledYes" />Yes
                 </label>
                <label class="btn btn-sm" data-bind="click: claimSettledToggle, checkedValue: model.optionsetYesNo()[0]">
                    <input type="radio" name="claimSettled" id="claimSettledNo" />No
                </label>
            </div>
    </div>
    
    <!-- ko if: model.claimSettled() !== null-->
    <!-- Enter settlement amount Input or estimated settlement amount-->
   <div class="form-group">
        <label class="form-label" for="settleAmount" data-bind="visible: model.claimSettled() === 5023402" >Enter settlement amount <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
        <label class="form-label" for="settleAmount" data-bind="visible: model.claimSettled() === 5023403" >Enter estimated settlement amount <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <input class="form-control col-4" id="settleAmount" type="number" placeholder="0" data-bind="visible: model.claimSettled() === 5023402, textInput: model.settleAmount, event: {mouseout: submitSettleMentAmount}, checkedValue: model.checkedSettleAmount" />
            <input class="form-control col-4" id="estimated" type="number" placeholder="0" data-bind="visible: model.claimSettled() === 5023403, textInput: model.estimatedsettleAmount, event: {mouseout: submitSettleMentAmount},  checkedValue: model.checkedSettleAmount" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.settleAmount, text:validation.settleAmount"></div>
        <!-- /ko -->
    </div>
    
    <!-- Uninsured lose-->
    
    <!-- ko if: model.settleAmount() > 0 || model.estimatedsettleAmount() > 0 && model.incorrectAmount() === false -->
    <div class="form-group">
        <label for="uninsuredLoss">Is there uninsured loss?<span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <div>
                <select id="uninsuredLoss" class="form-control" data-bind="options: model.uninsuredLoss, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select value', click: checkUninsuredLoss">
                </select> 
            </div>
    </div>
    
    <div class="form-group" data-bind="visible: model.uninsuredLossValue() === '500002002'">
        <label for="uninsuredLossDocs">Are documents relating to uninsured loss available? <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <div>
                <select id="uninsuredLossDocs" class="form-control" data-bind="options: model.uninsuredLossDocs, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select value', click: checkUninsuredLossDocs">
                </select> 
            </div>
    </div>
     <div class="form-group" data-bind="visible: model.uninsuredLossDocsValue() === '5023402'">
        <label class="form-label" for="uninsuredSettleAmount" >Enter uninsured loss amount</label>
            <input class="form-control col-4" id="uninsuredSettleAmount" type="number" placeholder="0" data-bind="textInput: model.uninsuredSettleAmount" />
    </div>
    
    
    
    <!--ko if: model.uninsuredCorrect() && model.uninsuredSettleAmount() >= 0 -->
    
    <!-- Cause of loss -->
    
    <div class="form-group">
        <label for="typeOfLoss">Type of loss <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <div>
                <select id="typeOfLoss" class="form-control" data-bind="options: model.typeOfLoss, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select a type of Loss', click: checkCauseOfLoss">
                </select> 
            </div>
    </div>
    
   
    
    <!-- Location of Loss-->
    
    <!-- ko if: !model.selectedCauseIncorrect() -->
    <div class="form-group">
        <label for="locationOfLoss">Location of loss <span style="display: inline-block; margin: 0 0; color: red;">*</span></label>
            <div>
                <select id="locationOfLoss" class="form-control" data-bind="options: model.locationOfLoss, optionsText: 'name' , optionsCaption: 'Select a location', optionsValue: 'id', click: checkLocation">
                </select> 
            </div>
    </div>
    
   
    
    <!-- ko if: model.selectedLocation() !== "" && model.selectedLocation() !== null &&  model.selectedLocationIncorrect() !== null    --> 
    
    <!-- enter address -->
       <!-- ko if: addressLookupFeatureEnabled -->
            <div class="form-group">
                <label for="address_search" class="control-label">Address of location of loss:</label>
                <div>
                    <div class="input-group" style="width: 100%" data-bind="css:{ 'open': showAutoComplete }">

                        <input id="address_search" type="text" placeholder="Start typing your address to search" class="form-control input-sm"
                               data-bind="textInput: searchQuery, event: {blur: hideAutoComplete, keydown: autoCompleteKey}"
                               autofocus="autofocus" autocomplete="off" />

                        <ul class="dropdown-menu address-drop-down">
                            <!-- ko if: showNoResultsMessage -->
                            <li class="dropdown-header">No results found</li>
                            <!-- /ko -->
                            <!-- ko if: searchInProgress -->
                            <li class="dropdown-header">Searching...</li>
                            <!-- /ko -->
                            <!-- ko foreach: autoCompleteResults -->
                            <li class="result" data-bind="event:{ mousedown: $parent.autoCompleteSelectResult.bind($parent) }, css:{ 'selected': selected }">
                                <a class="result-bordered">
                                    <div class="flex-row">
                                        <div class="column-fit">
                                            <span data-bind="text: display"></span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <!-- /ko -->
                        </ul>
                    </div>
                </div>
            </div>
        <!-- /ko -->
    
    <!--police available-->
    <div class="form-group">
        <label class="form-label" for="policeAvailable">Is a police report available?</label>
            <div id="policeAvailable" class="btn-group" data-toggle="buttons">
                <label class="btn btn-sm" data-bind="click: policeToggle, checkedValue: model.optionsetYesNo()[1]">
                    <input type="radio" name="policeAvailable" value="1" id="policeAvailableYes" />Yes
                 </label>
                <label class="btn btn-sm" data-bind="click: policeToggle, checkedValue: model.optionsetYesNo()[0]">
                    <input type="radio" name="policeAvailable" value="0" id="policeAvailableNo" />No
                </label>
            </div>
    </div>
    
    
    <!--police available yes-->
    <!-- ko if: model.policeNumberAvailable() === 5023402  -->
    <div class="form-group">
        <label class="form-label" for="policeNumber">Enter police report/event number</label>
            <input class="form-control col-4" id="policeNumber" type="text" placeholder="Insert police event number" data-bind="textInput: model.inputPoliceNumber" />
         <!--ko if: !model.validationMessages() -->
        <div class="text-danger" data-bind="visible: validation.inputPoliceNumber, text:validation.inputPoliceNumber"></div>
        <!-- /ko -->
    </div>
    <!-- /ko -->
    
    
    <!-- Upload files section-->
    <!-- ko if: model.locationOfLoss() !== undefined && model.selectedLocationIncorrect() !== null   -->
    <div class="form-group">
        <div id="uploadDocs">
            <label class="form-label" for="settleAmount">Please upload all relevant documents e.g:</label>
            <div>
                <ul>
                    <li>Loss adjuster's report and any annexures</li>
                    <li>Photos/videos</li>
                    <li>Expert reports</li>
                    <li>Release or subrogation release</li>
                    <li>Proof of loss (quotes/invoices)</li>
                    <li>Claim form</li>
                    <li>Uninsured loss</li>
                </ul>
            </div>
        </div>
    </div>       
    
    
    <div class="file-upload-section">
    
    
    <div class="upload-section-wrap">
                <button class="btn btn-primary btn-md button-wrap" style="margin-bottom: 10px;"  for="upload-section" data-bind="{ event: { change: selectFiles }}">Upload documents</button>
                <input type="file" id="upload-section" data-bind="{ event: { change: selectFiles }}" class="form-control" accept=".avi,.bmp,.doc,.docx,.gif,.jpeg,.jpg,.mp3,.mp4,.mpeg,.mpg,.pdf,.png,.ppt,.pptx,.txt,.wav,.wmv,.xls,.xlsx,.zip" multiple/>
    </div>
        
        
        <div class="upload-section-wrap">
            <div data-bind="nativeDropZone:{canDrop:true, onDrop:$root.dropFiles.bind($root)}" class="rd-dropzone" style="min-height: 100px;">
                <div class="fa fa-upload text-notice" ></div>
                <p>Drag or select files to upload</p>
            </div>
        </div>
        <div class="files-uploaded">
            <label>My uploaded documents:</label>
                <ul>
                <!-- ko foreach: files -->
                <div class="individual-files">
                    <li data-bind="text:'&nbsp;&nbsp;' + name" class="fa fa-file"></li>
                    <span class="cancel-upload" data-bind="click: $root.removeFiles.bind($root)"><i class="fa fa-trash" style="color: #ad6501"></i></span>
                </div>
                <!-- /ko -->
                </ul>
        </div>
    </div>
    
    



    <!-- Additional Instructions-->
    
     <div class="form-group">
        <label class="form-label" for="additionalInfo">Additional instructions/notes</label>
            <textarea id="additionalInfo" name="story"  data-bind="textInput: model.additionalInfo" style="border-radius: 4px"  rows="5" cols="33"></textarea>
        <div class="text-danger" data-bind="visible: validation.inputAddressLoss, text:validation.inputAddressLoss"></div>
    </div>
    
    
    
    <!-- T&C content -->
    <div class="form-group">
        <label class="form-label" for="TCHeader" style="color:#05428c ;margin-top: 10px; font-size: 16px; margin-bottom: 10px;">Terms and conditions</label>
        <label class="form-label" id="TC" for="TC">By submitting your instructions through the W+K Express Recoveries portal, you instruct Wotton + Kearney to undertake an express recovery for you in accordance with the Express Recoveries <a data-toggle="modal" id="TCLink"  data-target="#tcsmodal" data-bind="click: checkComplex"> Terms and conditions</a></label>
            <div id="TCbtns" class="btn-group" data-toggle="buttons">
                <label class="btn btn-sm" data-bind="click: tandcToggle, checkedValue: true">
                    <input type="radio" name="TC" value="1" id="TCYEs" />I agree
                </label>
                <label class="btn btn-sm" data-bind="click: tandcToggle, checkedValue: false">
                    <input type="radio" name="TC" value="0" id="TCNo" />Cancel
                </label>
            </div>
    </div>
    
    <div class="submitBtn" data-bind="">
        <button class="btn btn-primary btn-md" type="button" data-bind="enable: tandcValue, click: $root.submit">Submit</button>
    </div>
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
  
  
    
    <!-- The Modal -->
    <div class="modal fade" id="tcsmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <!-- ko if: complex() === 5023402 -->
                    <h4 class="modal-title">Terms and Conditons: Express instruction</h4>
                    <!-- /ko -->
                    <!-- ko if: complex() === 5023403 -->
                    <h4 class="modal-title">Terms and Conditons: Complex instruction</h4>
                    <!-- /ko -->
                </div>
                <div class="modal-body">
                    <!-- ko if: complex() === 5023402  -->
                        <div data-bind="html:model.expressHtml"></div>
                    <!-- /ko -->
                    <!--ko if: complex() === 5023403  -->
                        <div data-bind="html:model.complexHtml"></div>
                    <!-- /ko -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /ko -->

    
  
   
    <!--T&CS agree -->
    <!--ko if: model.currentlySubmited() -->
    <div style="display: flex; flex-direction: column; align-items: center;">
        <div class="submittedMessage">
            <strong>Thank you for your referral.  A member of our team will conduct a conflict check and will contact you within 48 hours.</strong>
        </div>
        <div class="documentsUploadedSec">
            <strong data-bind="text: documentsSuccesfullyUploaded().length"></strong> out of <strong data-bind="text: files().length"></strong> documents uploaded.
         <!-- ko if: files().length > documentsSuccesfullyUploaded().length -->
         <div>
            <strong>Files:</strong>
             <!--ko foreach: filesNotUploaded -->
                <li data-bind="text: name" style="padding-left: 30px;adding-bottom: 10px;"></li>
            <!-- /ko -->
            <strong>Failed to upload.</strong>
        </div>
         <!-- /ko -->
        </div>
        <button type="button" class="btn btn-default" data-bind="click: reset" style="width: 250px; margin: 10px;">Submit another recoveries instruction</button>
    </div>
    <!-- /ko -->    
    <!--T&CS disagree -->
    <!--<div>-->
    <!--    <strong>You have selected not to agree with our T&amp;Cs. Have a nice day.</strong>-->
    <!--</div>-->
</div>